<!DOCTYPE html>
<html><head>
  
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">
  <title>Stunt :: Documentation</title>
<link rel="stylesheet" type="text/css" href="styles/index.css">
<style>

.title {
	font-weight: bold;
}
.subtitle {
	font-style: italic;
}

#navigation {
	height:70%;
	width:15%;
	float:left;
	display:inline;
	padding-left:10px;
	padding-top:50px;
}

#navigation a:link {color:#000000;}
#navigation a:visited {color:#000000;}
#navigation a:hover {color:#FF00FF;}

#content { 
	margin: 0 auto;
	width:70%;
	padding: 30px;
}

.alignimg {
	display:block;
	margin-left:auto;
	margin-right:auto;
	padding-top:30px;
	padding-bottom:30px;
}

</style>

</head><body alink="#000099" link="#000099" vlink="#990099">

<div class="menu">
<ul>
	<li><a href="index.html">Overview</a></li>
	<li style="background: #4b545f none repeat scroll 0% 50%;"><a style="color: #ffffff;" href="#">Documentation</a></li>
	<li><a href="contacts.html">Contacts</a></li>
</ul>
</div>

<div id="placeholderMenu"></div>

<div id="navigation">
<a href="#description">Description</a><br><br>
<a href="https://godoc.org/github.com/ektodorov/stunt-reporting-server/src/utils">Stunt API</a><br><br>
<a href="#architecture">Architecture</a><br><br>
<a href="#howtouse">How to use Stunt</a><br><br>
</div>

<span id="description"></span>
<div id="content">
<div class="title">
<p>Description</p>
</div>
Stunt is aimed at getting information from clients while an application is in development. We like to think of it as
analytics for developers, because we inteded it to collect data from an application that is important from an application development
stand point.But it can easily can be changed to collect any analytical data from an application that we deem important.
We have convenience methods for sending string reports, sending images, sending any kind of files. We have implemented an example client
for Android. Later on we can have one for iOS.



<span id="architecture"></span><br><br>
<div class="title">
<p>Architecture</p>
</div>
Access<br>
We use the API key to authenticate to the service. We have some code inplace, which would make it easy to switch to Token based
authentication. Currently we have selected not to use it, since we don't want to have an initial call to get or refresh a Token.
We want to make it easy to just send our report to the server at any moment without any preconditions. Although even if we decide to
switch to Token authentication later, we can implement it in a way that the Stunt framework would ask and refresh the token whenever it is
needed, without requiring the user to have a "register" call before any other report calls.<br><br>

For the Android client implementation we have variables in StuntConst.java file:<br>
<pre>
    public static final int REPORTRATE_INSTANT = 0;
    public static final int REPORTRATE_TIME = 1;
    public static final int REPORTRATE_ON_EVENT_COUNT = 2;
</pre>
<br>
This is that we intendet to implement reporting in different condition.
<ul>
<li>Instantly - reports are sent immediately, like the current implementation.</li>
<li>Timed reports - reports are aggregated and sent only on predefined timeouts.</li>
<li>Counted reports - reports are collected and sent only when a certain ammount of reports have aggregated.</li>
</ul>
But then we decide in the use case that we have in mind we don't need the latter to and implemented only the Instant mode of reports.<br>
Also if we need the reporting to be more persistent we would implement a check if the report has been successfuly sent and if not we would keep the report
until the next time we try to send a report and so on, until the application is running. If we want reports to be even more stubborn we would not keep such
aggregated reports (only) in memory, but we will persist them to disk, so that we can even send them if the application is closed and later started again.
<br><br>

Database<br>
We are currently using a SQLite database that is created in the current working directory of the application. Yes, yes we know.
But is what is most convenient for development for us. If we are going to be using it with more than one or two user simultaneously this
is not what we would want to use, since SQLite does not support concurent access. We could easily serialize the database access, but the users
that are on the queue would ver quickly reach the point where their connectins will timeout often.
But fear not. With one line of change we can use any other database. We intend to use it with Heroku's Postgre SQL:<br>
database_stunt.go -> func DbInit:<br>
db, err = sql.Open(DB_TYPE, DB_NAME) we should pass the database type and access URL.
<br>

In the constants_stunt.go file we can find the database tables and their structure.<br>
TABLE_reports<br>
TABLE_clientinfo<br>
TABLE_invites<br>
tables are suffixed with an API key. This way each API key has separate such tables from other api keys. It is a means of sharding the data, because
there is no need to store all reports for all API keys in one set of these tables.
<br>

<span id="howtouse"></span><br><br>
<div class="title">
<p>How to use the Stunt</p>
</div>
Android application setup
<ol>
<li>In AndroidManifest.xml add two meta-data tags at the end of the application tag:</li>
<pre>
&lt;meta-data android:name="stunt_enabled" android:value="true"/&gt;
&lt;meta-data android:name="stunt_api_key" android:value="your_api_key_from_the_stunt_portal"/&gt;
</pre>
<li>Add Stunt source files or archive to you project.</li>
<li>There is no registration needed, just use the appropriate “report” method.</li>
</ol>
<br>

<p>Stunt web portal</p>
<ol>
<li>If you do not have an account create one by supplying an email and password on the registration page.</li>
<a href="./images/stunt_screenshots/register.png"><img src="./images/stunt_screenshots/register.png" border="1" width="480" height="200"/></a><br><br>
<li>Login using the email and password that you used to create an account.</li>
<a href="./images/stunt_screenshots/login.png"><img src="./images/stunt_screenshots/login.png" border="1" width="480" height="170"/></a><br><br>
<li>API Keys menu item - create an API key to be used in a client application.</li>
<a href="./images/stunt_screenshots/createapikey.png"><img src="./images/stunt_screenshots/createapikey.png" border="1" width="320" height="240"/></a><br><br>
<li>API Keys page</li>
<ul>
<li>Go to reports</li>
<a href="./images/stunt_screenshots/listreports.png"><img src="./images/stunt_screenshots/listreports.png" border="1" width="320" height="240"/></a><br><br>
<li>Shows reports sent from clients using this API Key, by going to API Keys list and selecting ClientIds from the left menu to view the list of clients.</li>
<li>Invite users to application. Share this API Key with other users, so that they can make changes to the application and see the reports sent from clients using this API keys.</li>
<a href="./images/stunt_screenshots/invite.png"><img src="./images/stunt_screenshots/invite.png" border="1" width="320" height="240"/></a><br><br>
<li>Delete API key</li>
<a href="./images/stunt_screenshots/deleteapikey.png"><img src="./images/stunt_screenshots/deleteapikey.png" border="1" width="320" height="240"/></a><br><br>
<li>Delete reports sent with API key</li>
<a href="./images/stunt_screenshots/deletereports.png"><img src="./images/stunt_screenshots/deletereports.png" border="1" width="320" height="240"/></a><br><br>
<ul>
</ol>


</div><!--content-->
<br><br>

<div class="footer">
	<span>Stunt reporting</span><br>
	<div id="footerLeft">
	Source:<br>
	<a href="https://github.com/ektodorov/stunt-reporting-server">Stunt reporting server</a><br>
	<a href="https://github.com/ektodorov/stunt-reporting-android">Stunt reporting Android client</a>
	</div>
	<div id="footerRight">
	Contacts:<br>
	emil.k.todorov@gmail.com<br>
	</div>
</div>

</body></html>
